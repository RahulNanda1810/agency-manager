<div class="client-list-container" *ngIf="orgId">
  <h3>Clients</h3>
  <div *ngIf="loading">Loading...</div>
  <div *ngIf="error" class="error">{{ error }}</div>
  <div class="client-grid">
    <div *ngFor="let client of clients" class="client-card" (click)="goToClient(client)" tabindex="0">
      <div class="client-card-header">
        <h4 class="client-card-name">{{ client.name }}</h4>
        <span class="client-actions">
          <button class="icon-btn edit-btn" (click)="startEdit(client); $event.stopPropagation();" title="Edit">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1976d2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>
          </button>
          <button class="icon-btn delete-btn" (click)="deleteClient(client); $event.stopPropagation();" title="Delete">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#e53935" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m5 0V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
          </button>
        </span>
      </div>
      <ng-container *ngIf="editingClient?._id !== client._id; else editForm">
      </ng-container>
      <ng-template #editForm>
        <form [formGroup]="editClientForm" (ngSubmit)="updateClient()" class="edit-form">
          <input formControlName="name" />
          <button type="submit" [disabled]="editClientForm.invalid || loading">Save</button>
          <button type="button" (click)="cancelEdit()">Cancel</button>
        </form>
      </ng-template>
    </div>
  </div>
  <h4>Create Client</h4>
  <form [formGroup]="createClientForm" (ngSubmit)="createClient()">
    <input formControlName="name" placeholder="Client Name" />
    <button type="submit" [disabled]="createClientForm.invalid || loading">Create</button>
  </form>
</div>
